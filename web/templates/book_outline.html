<!-- web/templates/book_outline.html -->
{% extends "base.html" %}

{% block content %}
<!-- –•–ª–µ–±–Ω—ã–µ –∫—Ä–æ—à–∫–∏ -->
<nav aria-label="breadcrumb">
  <ol class="breadcrumb">
    <li class="breadcrumb-item"><a href="/books">–ú–æ–∏ –∫–Ω–∏–≥–∏</a></li>
    <li class="breadcrumb-item active" aria-current="page">{{ book.title }}</li>
  </ol>
</nav>

<h2 class="mb-3">{{ book.title }}</h2>

<!-- –§–æ—Ä–º–∞ –ø–µ—Ä–µ–≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ -->
<form class="mb-4"
      hx-post="/regenerate-outline"
      hx-target="#outline-table"
      hx-swap="innerHTML"
      hx-indicator=".htmx-indicator"
      enctype="application/x-www-form-urlencoded">

  <input type="hidden" name="book_id" value="{{ book.id }}">

  <div class="mb-3">
    <label class="form-label">–û–ø–∏—Å–∞–Ω–∏–µ —Å—é–∂–µ—Ç–∞</label>
    <textarea name="premise" class="form-control" rows="3" required>{{ book.premise }}</textarea>
  </div>

  <button type="submit" class="btn btn-warning btn-sm">üîÑ –ü–µ—Ä–µ–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å —Å—é–∂–µ—Ç</button>
</form>

<!-- –ö–Ω–æ–ø–∫–∏ –¥–µ–π—Å—Ç–≤–∏–π -->
<div class="mb-3">
  <button 
    hx-post="/generate-chapters" 
    hx-confirm="–°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å –æ—Ç–º–µ—á–µ–Ω–Ω—ã–µ –≥–ª–∞–≤—ã?" 
    hx-target="#outline-table" 
    hx-swap="innerHTML"
    class="btn btn-success btn-sm"
  >
    üìö –°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å –≥–ª–∞–≤—ã
  </button>

  <button 
    hx-post="/delete-book" 
    hx-confirm="–£–¥–∞–ª–∏—Ç—å –∫–Ω–∏–≥—É –±–µ–∑–≤–æ–∑–≤—Ä–∞—Ç–Ω–æ?" 
    class="btn btn-danger btn-sm float-end"
    name="book_id"
    value="{{ book.id }}"
  >
    üóë –£–¥–∞–ª–∏—Ç—å
  </button>
</div>

<!-- –¢–∞–±–ª–∏—Ü–∞ —Å—é–∂–µ—Ç–∞ -->
<div id="outline-table">
  {% include "book_outline_table.html" %}
</div>

{% endblock %}